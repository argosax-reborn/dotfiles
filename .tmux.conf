# .tmux.conf
#
# Derived from screen-keys.conf by Nicholas Marriott.  Public domain.  This
# configuration is aimed at former GNU Screen users and serves to map many of
# the common GNU Screen key bindings to their equivalent tmux commands.
# Note, however, that some GNU Screen key bindings have no tmux equivalent.
# Also, this set omits bindings for some commands which are available in tmux
# but not in GNU Screen.
#
# Subsequent modifications provide extended functionality; namely, a more
# intelligent detaching mechanism when sessions are grouped.

#
# SESSION OPTIONS
#

# Remove the status bar
set -g status off

# Set the escape delay to match GNU Screen's maptimeout default of 300 ms
set -g escape-time 300

# Set TERM
set -g default-terminal "screen-256color-it"

# Increase message display time to 2 seconds
set -g display-time 2000

set -g set-titles on
set -g set-titles-string "#S:#I:#W"

set -g renumber-windows on
set -g automatic-rename on
set -g automatic-rename-format "#{pane_current_command}#{?pane_dead,[dead],}"

#
# WINDOW OPTIONS
#

# vi-style controls for copy mode
setw -g mode-keys vi

# By default, all windows in a session are constrained to the size of the
# smallest client connected to that session, even if both clients are looking
# at different windows.  It seems that in this particular case, GNU Screen
# has the better default where a window is only constrained in size if a
# smaller client is actively looking at it.  This behaviour can be fixed by
# setting tmux's aggressive-resize option.
setw -g aggressive-resize on

#
# BINDINGS
#

# Set the prefix to ^A.
unbind C-b
set -g prefix ^A
bind a send-prefix

# Bind appropriate commands similar to GNU Screen.
# lockscreen ^X x
unbind ^X
bind ^X lock-server
unbind x
bind x lock-server

# screen ^C c
unbind ^C
bind ^C new-window
unbind c
bind c new-window

# detach ^D d
# Before detaching, first check to see if the current session is grouped with
# another session and, if so, kill the session instead of detaching.
unbind ^D
bind ^D if-shell -b "test '#{session_grouped}' = 1 && test '#{session_name}' != 0" "kill-session" "detach-client"
unbind d
bind d if-shell -b "test '#{session_grouped}' = 1 && test '#{session_name}' != 0" "kill-session" "detach-client"

# displays *
unbind *
bind * list-clients

# next ^@ ^N sp n
unbind ^@
bind ^@ next-window
unbind ^N
bind ^N next-window
unbind " "
bind " " next-window
unbind n
bind n next-window

# title A
unbind A
bind A command-prompt "rename-window %%"

# other ^A
unbind ^A
bind ^A last-window

# prev ^H ^P p ^?
unbind ^H
bind ^H previous-window
unbind ^P
bind ^P previous-window
unbind p
bind p previous-window
unbind BSpace
bind BSpace previous-window

# windows ^W w
unbind ^W
bind ^W list-windows
unbind w
bind w list-windows

# quit \
unbind '\'
bind '\' confirm-before "kill-server"

# kill K k
unbind K
bind K confirm-before "kill-window"
unbind k
bind k confirm-before "kill-window"

# redisplay ^L l
unbind ^L
bind ^L refresh-client
unbind l
bind l refresh-client

# split -v |
unbind |
bind | split-window

# :kB: focus up
unbind Tab
bind Tab select-pane -t:.+
unbind BTab
bind BTab select-pane -t:.-

# " windowlist -b
unbind '"'
bind '"' choose-window

# Open a copy of the current tmux session in another urxvt window.
unbind C
bind C run-shell -b "env -u TMUX urxvt -name urxvt-blue -e tmux new-session -A -D -s B -t '#{session_name}' \\; select-window -t '#{window_id}'"

# Kill the aforementioned session copy.
unbind D
bind D kill-session -t B

# Toggle read-only client status
unbind r
bind r switch-client -r

# $Id: vim-keys.conf,v 1.2 2010-09-18 09:36:15 nicm Exp $
#
# vim-keys.conf, v1.2 2010/09/12
#
# By Daniel Thau.  Public domain.
#
# This configuration file binds many vi- and vim-like bindings to the
# appropriate tmux key bindings.  Note that for many key bindings there is
# no tmux analogue.  This is intended for tmux 1.3, which handles pane
# selection differently from the previous versions.

# Split windows like vim.
# vim's definition of a horizontal/vertical split is reversed from tmux's.
bind s split-window -v
bind v split-window -h

# Move around panes with hjkl, as one would in vim after pressing ctrl-w
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resize panes like vim
# Feel free to change the "1" to however many lines you want to resize by,
# only one at a time can be slow.
bind < resize-pane -L 1
bind > resize-pane -R 1
bind - resize-pane -D 1
bind + resize-pane -U 1

# Bind : to command-prompt like vim.  This is the default in tmux already.
bind : command-prompt
